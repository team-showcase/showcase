"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_1 = require("../../../../specification/common");
const appProvider_1 = require("../../../common/appProvider");
const utils_1 = require("../utils");
const overviewPage_1 = require("../pages/overviewPage");
const application_1 = require("../../application");
const common_2 = require("../../../common");
const schemaAccess_1 = require("../../../../specification/schemaAccess");
class V2OvpProvider extends appProvider_1.AppProvider {
    constructor(manifest, schemas) {
        const pages = {};
        const sapOvp = manifest['sap.ovp'];
        const appSettings = new application_1.AppSettings();
        const schemaFile = common_2.getSchemaFilePath(schemaAccess_1.SchemaType.Application);
        utils_1.transferSettingsOfObject(appSettings, manifest, schemas[schemaFile.filename]['definitions']['AppSettings'], []);
        const jsonSchema = Object.keys(schemas).find((element) => element.includes(common_1.PageType.OverviewPage));
        const page = {
            pageType: common_1.PageType.OverviewPage,
            config: overviewPage_1.createOverviewPageConfig(manifest, schemas[jsonSchema]),
            entitySet: sapOvp.globalFilterEntitySet
        };
        const id = common_2.generatePageId(common_1.FioriElementsVersion.v2, page.pageType, page.entitySet, page.navigationProperty);
        pages[id] = page;
        super(manifest, schemas, id, pages, common_1.FioriElementsVersion.v2, appSettings);
    }
}
exports.V2OvpProvider = V2OvpProvider;
//# sourceMappingURL=ovpProvider.js.map